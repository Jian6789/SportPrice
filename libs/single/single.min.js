!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(10),a=n(5),u=n(1),s=function(){function e(){r(this,e),this.Routers=[],this.VM=o.VM,this.page=null,this.ajax=a.ajax;var t=this;window.addEventListener("load",function(){t.urlChange()}),window.addEventListener("hashchange",function(){t.urlChange()})}return i(e,[{key:"urlChange",value:function(){var e=this.getRouter();e&&this.loadTemplate(e.tempUrl,e.ctrUrl)}},{key:"getRouter",value:function(){var e=this.getURL(),t=this.Routers.find(function(t){return t.url===e});return t?t:this.Routers[0]}},{key:"getURL",value:function(){return location.hash.split("?")[0].split("#")[1]}},{key:"loadScript",value:function(e){var t=document.createElement("script"),n=this;t.src=e,t.async=!0,t.onload=function(){document.body.removeChild(t),(0,u.isFun)(n.page)&&n.page()},document.body.appendChild(t)}},{key:"loadTemplate",value:function(e,t){var n=this;n.ajax({type:"GET",url:e,async:!1,success:function(e){document.getElementById("sp-app").innerHTML=e,n.loadScript(t)}})}}]),e}();window.Single=new s},function(e,t){"use strict";function n(e){return void 0!=e&&"object"===("undefined"==typeof e?"undefined":v(e))}function r(e){return"[object Object]"===Object.prototype.toString.call(e)}function i(e){return Array.isArray(e)}function o(e){return"function"==typeof e}function a(e){throw new Error(e)}function u(e){return 1===e.nodeType}function s(e){return 2===e.nodeType}function c(e){return 3===e.nodeType}function l(e){return[].slice.call(e)}function f(e){return 0===e.indexOf("s-")}function d(e){return 0===e.indexOf("on")}function p(e){return 0===e.indexOf("for")}function h(e,t){var n=t.parentNode;n.lastElementChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)}Object.defineProperty(t,"__esModule",{value:!0});var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isObject=n,t.isPlainObj=r,t.isArray=i,t.isFun=o,t.err=a,t.isEleNode=u,t.isAttrNode=s,t.isTextNode=c,t.toArray=l,t.isDir=f,t.isEventDir=d,t.isForDir=p,t.insertAfter=h;t.regText=/\{\{(.+)\}\}/},function(e,t,n){"use strict";function r(e){return document.createRange().createContextualFragment(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.dirUnit=void 0,t.changHtml=r;var i=n(1),o=n(3),a=n(7),u=n(8),s=t.dirUnit={text:function(e,t,n){s._bind(e,t,n,"text")},if:function(e,t,n){return new u.IfDir(e,t,n)},for:function(e,t,n){return new a.ForDir(e,t,n)},html:function(e,t,n){s._bind(e,t,n,"html")},class:function(e,t,n){s._bind(e,t,n,"class")},model:function(e,t,n){s._bind(e,t,n,"model");var r=t.$data,i=s._getVal(n,r);e.addEventListener("input",function(e){i=s._getVal(n,r);var t=e||window.event,o=t.target.value;o!=i&&s._setVal(n,r,o)},!0)},event:function(e,t,n,r){var o=r.split(":")[1],a=t.$opts.event[n];(0,i.isFun)(a)&&e.addEventListener(o,a.bind(t),!1)},_bind:function(e,t,n,r){var a=c[r+"Upper"];(0,i.isFun)(a)&&a(e,s._getVal(n,t.$data)),new o.Watcher(t,n,function(t,n){(0,i.isFun)(a)&&a(e,t,n)})},_getVal:function(e,t){return e.split(".").forEach(function(e){t=t[e]}),t},_setVal:function(e,t,n){var r=e.split("."),i=r.length-1;r.forEach(function(e,r){r==i?t[e]=n:t=t[e]})}},c={textUpper:function(e,t,n){n=void 0!=n?n+"":i.regText,e.textContent=e.textContent.replace(n,t)},htmlUpper:function(e,t){e.innerHTML=t},modelUpper:function(e,t,n){e.value=t?t:""},classUpper:function(e,t,n){e.className=(n?e.className.replace(n,t):e.className+" "+t).trim()}}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=t.target=null;t.Watcher=function(){function e(t,r,i){n(this,e),this.$vm=t,this.$keys=r,this._fn=i,this.depIds={},this.val=this.get()}return r(e,[{key:"get",value:function(){t.target=i=this;var e=this.getVal();return t.target=i=null,e}},{key:"getVal",value:function(){var e=this.$keys.split("."),t=this.$vm.$data;return e.forEach(function(e){t=t[e]}),t}},{key:"addDep",value:function(e){this.depIds.hasOwnProperty(e.id)||(this.depIds[e.id]=e,e.addSub(this))}},{key:"update",value:function(){var e=this.get(),t=this.val;t!=e&&(this.val=e,this._fn.call(this.$vm,e,t,this))}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Compile=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=n(2);t.Compile=function(){function e(t,n,i){if(r(this,e),this.$vm=n,this.$opts=this.$vm.$opts,this.$data=this.$opts.data,this.$isDel=i||!1,this.$el=t.nodeType?t:document.querySelector(t),this.$el){var o=this.node2Fragment(this.$el);this.analyEleNode(o),this.$el.appendChild(o)}}return i(e,[{key:"node2Fragment",value:function(e){for(var t=document.createDocumentFragment(),n=void 0;n=e.firstChild;)t.appendChild(n);return t}},{key:"analyEleNode",value:function(e){var t=e.childNodes,n=this;(0,o.toArray)(t).forEach(function(e){(0,o.isEleNode)(e)?n.analyArrtNode(e):(0,o.isTextNode)(e)&&o.regText.test(e.textContent)&&a.dirUnit.text(e,n.$vm,RegExp.$1.trim()),e.parentNode&&e.childNodes&&e.childNodes.length>-1&&n.analyEleNode(e)})}},{key:"analyArrtNode",value:function(e){var t=e.attributes,n=this,r="";(0,o.toArray)(t).forEach(function(t){if(r=t.name,(0,o.isDir)(r)){var i=r.split("-")[1],u=t.value.trim();(0,o.isEventDir)(i)?a.dirUnit.event(e,n.$vm,u,i):a.dirUnit[i](e,n.$vm,u)}else o.regText.test(t.textContent)&&a.dirUnit.text(t,n.$vm,RegExp.$1.trim())})}}]),e}()},function(e,t){(function(e){"use strict";function n(e){if(!e.url)throw new Error("请输入正确的URL!");if(e.type=e.type||"GET",e.async=e.async||!0,e.data=r(e.data),e.url="POST"==e.type?e.url:e.url+(e.url.indexOf("?")==-1?"?":"&")+e.data,"jsonp"==e.type)return i(e),!1;var t=new XMLHttpRequest;t.open(e.type,e.url,e.async),t.onreadystatechange=function(){4==t.readyState&&e.success&&e.success(t.response)},t.send("GET"===e.type?null:e.data)}function r(e){return e?Object.keys(e).reduce(function(t,n){return t+="&"+n+"="+e[n]},"").slice(1):""}function i(t){if(!t.jsonp)throw new Error("请输入函数名称");var n="jsonp_"+o++;t.url=t.url+(t.url.indexOf("?")==-1?"?":"&")+t.jsonp+"="+n;var r=document.createElement("script");e[n]=function(i){try{t.success(i)}finally{delete e[n],r.parentNode.removeChild(r)}},r.src=t.url,document.body.appendChild(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=n;var o=0}).call(t,function(){return this}())},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=0;t.Dep=function(){function e(){n(this,e),this.id=i++,this.sub=[]}return r(e,[{key:"addSub",value:function(e){this.sub.push(e)}},{key:"rmSub",value:function(e){var t=/\.(\d)+\./g;return e.filter(function(e){return!e.$keys.match(t)})}},{key:"depend",value:function(){target.addDep(this)}},{key:"notify",value:function(e){e&&(this.sub=this.rmSub(this.sub)),this.sub.forEach(function(e){e.update()})}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ForDir=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(n(1),n(2)),a=n(4),u=n(2),s=n(3);t.ForDir=function(){function e(t,n,i){r(this,e),this.start=null,this.end=null,this.init(t,n,i)}return i(e,[{key:"init",value:function(e,t,n){this.bind(e,t,n)}},{key:"bind",value:function(e,t,n){var r=this,i=n.split("in")[1].trim(),o=this;o.upper(e,t,n),new s.Watcher(t,i,function(i,a,u){for(;r.start.nextSibling!=r.end;)r.end.parentNode.removeChild(r.start.nextSibling);o.upper(e,t,n)})}},{key:"upper",value:function(e,t,n){this.start||(this.start=document.createComment("start of s-for"),e.parentNode.insertBefore(this.start,e)),this.end||(this.end=document.createComment("end of s-for"),e.parentNode.insertBefore(this.end,e)),e.removeAttribute("s-for");for(var r=n.split("in")[0].trim(),i=n.split("in")[1].trim(),s=o.dirUnit._getVal(i,t.$data),c=e.outerHTML,l=new RegExp(r,"gm"),f="",d=0,p=s.length;d<p;d++)f+=c.replace(l,i+"."+d);f=(0,u.changHtml)(f),new a.Compile(f,t,!0),this.end.parentNode.insertBefore(f,this.end),e.parentNode&&e.parentNode.removeChild(e)}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.IfDir=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),a=n(4),u=(n(2),n(3));t.IfDir=function(){function e(t,n,i){r(this,e),this.start=null,this.end=null,this.init(t,n,i)}return i(e,[{key:"init",value:function(e,t,n){this.bind(e,t,n)}},{key:"bind",value:function(e,t,n){var r=this;new a.Compile(e,t),r.upper(e,t,n,o.dirUnit._getVal(n,t.$data)),new u.Watcher(t,n,function(i,o){!!i!=!!o&&r.upper(e,t,n,i)})}},{key:"upper",value:function(e,t,n,r,i){this.start||(this.start=document.createComment("start of s-if"),e.parentNode.insertBefore(this.start,e)),this.end||(this.end=document.createComment("end of s-if"),e.parentNode.insertBefore(this.end,e)),e.parentNode&&e.parentNode.removeChild(e),r&&this.end.parentNode.insertBefore(e,this.end)}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Observe=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=n(6),u=n(3);t.Observe=function(){function e(t){r(this,e),(0,o.isObject)(t)&&this.walk(t)}return i(e,[{key:"walk",value:function(e){var t=this,n=Object.getOwnPropertyDescriptor;Object.keys(e).forEach(function(r){(0,o.isFun)(n(e,r).set)||t.convert(e,r,e[r])})}},{key:"convert",value:function(t,n,r){var i=new e(r),s=new a.Dep;Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:function(){return u.target&&u.target.addDep(s),r},set:function(t){r!=t&&(r=t,i=new e(t),s.notify((0,o.isArray)(t)))}})}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.VM=void 0;var i=n(1),o=n(9),a=n(4);t.VM=function e(t){r(this,e),this.$opts=t,this.$data=t.data,(0,i.isFun)(t)&&(t.data=t.data()),this.$observe=new o.Observe(t.data),this.$compile=new a.Compile(t.el||document.body,this)}}]);
//# sourceMappingURL=single.min.js.map